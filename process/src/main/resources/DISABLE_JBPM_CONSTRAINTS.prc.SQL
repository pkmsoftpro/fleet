CREATE OR REPLACE PROCEDURE DISABLE_JBPM_CONSTRAINTS
AS
  CURSOR ALL_FKS 
  IS
  	SELECT * 
	FROM ALL_CONSTRAINTS
	WHERE (TABLE_NAME LIKE 'JBPM_%' 
		OR TABLE_NAME LIKE 'REPEATABLE_TRANSITION' 
		OR TABLE_NAME LIKE 'TRANSITION_CONDITIONS'
		OR CONSTRAINT_NAME LIKE 'FK5A5A83C98F52667') AND
		  OWNER = 'TWMS_USER' AND
	  	  CONSTRAINT_TYPE = 'R' AND 
		  STATUS = 'ENABLED';
	
  CURSOR ALL_JBPM 
  IS
  	SELECT * 
	FROM ALL_TABLES 
	WHERE TABLE_NAME LIKE 'JBPM%';	
		 
  BEGIN
  
  	   FOR EACH_REC IN ALL_FKS
	   LOOP
	   	   BEGIN
				EXECUTE IMMEDIATE 'ALTER TABLE TWMS_USER.'|| EACH_REC.TABLE_NAME || ' DISABLE NOVALIDATE CONSTRAINT ' || EACH_REC.CONSTRAINT_NAME;
		   END;
	   END LOOP;
	   
	   FOR EACH_TAB IN ALL_JBPM
	   LOOP
	   	   BEGIN
		   		EXECUTE IMMEDIATE 'TRUNCATE TABLE TWMS_USER.'||EACH_TAB.TABLE_NAME;		   
		   END;
	   END LOOP;	   	   
  END;
/

